# --- 로그 설정 ---
logLevel: info
logDestinations: [stdout, file]
#logFile: /var/log/mediamtx/mediamtx.log
logFile: ./mediamtx.log

# --- API 설정 ---
api: yes
apiAddress: :9997

# --- HLS 설정 (Low Latency) ---
hls: yes
hlsAddress: :8888
hlsAlwaysRemux: no           # 모든 경로에서 항상 HLS 스트리밍 생성
hlsVariant: lowLatency        # 저지연 HLS 형식
hlsSegmentCount: 7            # 재생 목록에 포함할 세그먼트 수
hlsSegmentDuration: 1s        # 각 세그먼트 길이 (짧을수록 저지연)
hlsPartDuration: 200ms        # 저지연 파트 길이

# --- RTSP 설정 ---
rtsp: yes
rtspAddress: :8121

# --- WebRTC 설정 ---
webrtc: yes
webrtcAddress: :8889
webrtcLocalUDPAddress: :8189
webrtcAdditionalHosts:
  - 192.168.10.181
webrtcAllowOrigin: "*"
webrtcICEServers2:
  - url: stun:stun.l.google.com:19302
  - url: turn:14.51.233.129:3478
    username: pluxity
    password: pluxity0304


# --- 인증 설정 (핵심 해결책: 올바른 키 이름과 구조) ---
# 'auth' 블록이 아니라, 아래의 키들이 직접 최상위 레벨에 위치해야 합니다.
authMethod: internal
authInternalUsers:
  - user: any
    pass:
    permissions:
      - action: api
      - action: publish
      - action: read
      - action: pprof

authHTTPExclude:
  - action: api
  - action: metrics
  - action: pprof

# 성능 모니터링을 위한 pprof 호환 엔드포인트를 활성화합니다.
pprof: yes
# pprof 리스너 주소입니다.
pprofAddress: :9999


# --- 경로 기본 설정 ---
pathDefaults:
  sourceOnDemand: yes
  rtspTransport: tcp

# --- 개별 경로 설정 ---
paths:

  CCTV-TEST-001:
    source: rtsp://admin:live0416@14.51.233.129:31554/Streaming/Channels/101
    ptz: true
    ptzSource: onvif://admin:pluxity123!@#@14.51.233.129:10081
  CCTV-TEST-002:
    source: rtsp://admin:live0416@14.51.233.129:32554/Streaming/Channels/101
    ptz: true
    ptzSource: onvif://admin:pluxity123!@#@14.51.233.129:10081
  CCTV-TEST-003:
    source: rtsp://admin:live0416@14.51.233.129:33554/Streaming/Channels/101
    ptz: true
    ptzSource: onvif://admin:pluxity123!@#@14.51.233.129:10081

  #   천안일봉공원BL2
  CCTV-CHEONAN-21:
    source: rtsp://admin:live0416@221.158.235.7:21554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-CHEONAN-22:
    source: rtsp://admin:live0416@221.158.235.7:22554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-CHEONAN-24:
    source: rtsp://admin:live0416@221.158.235.7:24554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-CHEONAN-25:
    source: rtsp://admin:live0416@221.158.235.7:25554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-CHEONAN-28:
    source: rtsp://admin:live0416@221.158.235.7:28554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-CHEONAN-29:
    source: rtsp://admin:live0416@221.158.235.7:29554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-CHEONAN-30:
    source: rtsp://admin:live0416@221.158.235.7:30554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-CHEONAN-32:
    source: rtsp://admin:live0416@221.158.235.7:32554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp

  # 연희 지역
  #  CCTV-YEONHEE-51:
  #    source: rtsp://admin:live0416@218.148.86.142:30551/profile1/media.smp
  #    sourceOnDemand: true
  #    rtspTransport: tcp
  #  CCTV-YEONHEE-52:
  #    source: rtsp://admin:live0416@218.148.86.142:30552/profile1/media.smp
  #    sourceOnDemand: true
  #    rtspTransport: tcp
  #  CCTV-YEONHEE-53:
  #    source: rtsp://admin:live0416@218.148.86.142:30553/profile1/media.smp
  #    sourceOnDemand: true
  #    rtspTransport: tcp
  #  CCTV-YEONHEE-54:
  #    source: rtsp://admin:live0416@218.148.86.142:30554/profile1/media.smp
  #    sourceOnDemand: true
  #    rtspTransport: tcp
  #  CCTV-YEONHEE-55:
  #    source: rtsp://admin:live0416@218.148.86.142:30555/profile1/media.smp
  #    sourceOnDemand: true
  #    rtspTransport: tcp
  #  CCTV-YEONHEE-56:
  #    source: rtsp://admin:live0416@218.148.86.142:30556/profile1/media.smp
  #    sourceOnDemand: true
  #    rtspTransport: tcp

  #   당진 해저케이블2공장
  CCTV-DANGJIN-31:
    source: rtsp://admin:live0416@59.25.78.21:31554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-DANGJIN-32:
    source: rtsp://admin:live0416@59.25.78.21:32554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-DANGJIN-33:
    source: rtsp://admin:live0416@59.25.78.21:33554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-DANGJIN-34:
    source: rtsp://admin:live0416@59.25.78.21:34554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-DANGJIN-35:
    source: rtsp://admin:live0416@59.25.78.21:35554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-DANGJIN-36:
    source: rtsp://admin:live0416@59.25.78.21:36554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp

  #     오산 지역 - OSAN-33, 36은 카메라 문제로 설정은 유지
  CCTV-OSAN-31:
    source: rtsp://admin:live0416@121.168.196.179:31554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-OSAN-32:
    source: rtsp://admin:live0416@121.168.196.179:32554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-OSAN-33:
    source: rtsp://admin:live0416@121.168.196.179:33554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
    # 카메라 문제로 타임아웃 자주 발생 - 타임아웃 증가
  CCTV-OSAN-34:
    source: rtsp://admin:live0416@121.168.196.179:34554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-OSAN-35:
    source: rtsp://admin:live0416@121.168.196.179:35554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-OSAN-36:
    source: rtsp://admin:live0416@121.168.196.179:36554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
    # 카메라 문제로 타임아웃 자주 발생 - 타임아웃 증가
  CCTV-OSAN-37:
    source: rtsp://admin:live0416@121.168.196.179:37554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-OSAN-38:
    source: rtsp://admin:live0416@121.168.196.179:38554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-OSAN-39:
    source: rtsp://admin:live0416@121.168.196.179:39554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-OSAN-40:
    source: rtsp://admin:live0416@121.168.196.179:40554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-OSAN-41:
    source: rtsp://admin:live0416@121.168.196.179:41554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-OSAN-42:
    source: rtsp://admin:live0416@121.168.196.179:42554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-OSAN-43:
    source: rtsp://admin:live0416@121.168.196.179:43554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-OSAN-44:
    source: rtsp://admin:live0416@121.168.196.179:44554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
  CCTV-OSAN-45:
    source: rtsp://admin:live0416@121.168.196.179:45554/profile1/media.smp
    sourceOnDemand: true
    rtspTransport: tcp
